flowchart TD
    User[ðŸ‘¤ KullanÄ±cÄ±] --> InputType{ðŸŽ¯ Girdi Tipi}
    
    InputType -->|Chat| ChatFlow[ðŸ’¬ Chat]
    InputType -->|Questions| QuestionFlow[â“ Sorular]
    InputType -->|File| FileFlow[ðŸ“„ Dosya]
    InputType -->|YouTube| YouTubeFlow[ðŸŽ¥ YouTube]
    InputType -->|Curriculum| CurriculumFlow[ðŸ“š MÃ¼fredat]
    
    ChatFlow --> Validate1[âœ… Validasyon]
    QuestionFlow --> Validate2[âœ… Validasyon]
    FileFlow --> Validate3[âœ… Validasyon]
    YouTubeFlow --> Validate4[âœ… Validasyon]
    CurriculumFlow --> Validate5[âœ… Validasyon]
    
    Validate1 --> Process1[âš™ï¸ Ä°ÅŸleme]
    Validate2 --> Process2[âš™ï¸ Ä°ÅŸleme]
    Validate3 --> Process3[âš™ï¸ Ä°ÅŸleme]
    Validate4 --> Process4[âš™ï¸ Ä°ÅŸleme]
    Validate5 --> Process5[âš™ï¸ Ä°ÅŸleme]
    
    Process1 --> Context[ðŸ”§ Context Builder]
    Process2 --> Context
    Process3 --> Context
    Process4 --> Context
    Process5 --> Context
    
    Context --> RAGCheck{ðŸ” RAG Gerekli?}
    
    RAGCheck -->|Evet| RAGSystem[ðŸ” RAG Sistemi]
    RAGCheck -->|HayÄ±r| AgentRouter[ðŸ¤– Agent Router]
    
    RAGSystem --> VectorSearch[ðŸ”¢ Vector Arama]
    VectorSearch --> ChromaDB[(ðŸ“Š ChromaDB)]
    ChromaDB --> ContextAugment[âž• Context GeniÅŸletme]
    
    ContextAugment --> AgentRouter
    AgentRouter --> ExpertSelect{ðŸ‘¨â€ðŸ« Uzman SeÃ§imi}
    
    ExpertSelect -->|Math| MathExpert[ðŸ“ Matematik]
    ExpertSelect -->|Physics| PhysicsExpert[âš›ï¸ Fizik]  
    ExpertSelect -->|Chemistry| ChemExpert[ðŸ§ª Kimya]
    ExpertSelect -->|Biology| BioExpert[ðŸ§¬ Biyoloji]
    ExpertSelect -->|General| GeneralExpert[ðŸŽ“ Genel]
    
    MathExpert --> LLMProcess[ðŸ¤– LLM Ä°ÅŸleme]
    PhysicsExpert --> LLMProcess
    ChemExpert --> LLMProcess
    BioExpert --> LLMProcess
    GeneralExpert --> LLMProcess
    
    LLMProcess --> GeminiAPI[âœ¨ Gemini API]
    GeminiAPI --> ResponseGen[ðŸ“ YanÄ±t Ãœretimi]
    
    ResponseGen --> ResponseVal[âœ… YanÄ±t Validasyon]
    ResponseVal --> MemoryUpdate[ðŸ’­ HafÄ±za GÃ¼ncelleme]
    
    MemoryUpdate --> FinalOutput[ðŸ“¤ Ã‡Ä±ktÄ±]
    FinalOutput --> User
    
    %% Error Handling
    Validate1 -->|Hata| ErrorHandler[âŒ Hata]
    Validate2 -->|Hata| ErrorHandler
    Validate3 -->|Hata| ErrorHandler
    Validate4 -->|Hata| ErrorHandler
    Validate5 -->|Hata| ErrorHandler
    GeminiAPI -->|API HatasÄ±| ErrorHandler
    
    ErrorHandler --> ErrorResponse[âš ï¸ Hata YanÄ±tÄ±]
    ErrorResponse --> User
    
    classDef input fill:#3b82f6,stroke:#1e40af,stroke-width:2px,color:#ffffff
    classDef validation fill:#10b981,stroke:#059669,stroke-width:2px,color:#ffffff
    classDef processing fill:#8b5cf6,stroke:#7c3aed,stroke-width:2px,color:#ffffff
    classDef rag fill:#f59e0b,stroke:#d97706,stroke-width:2px,color:#ffffff
    classDef agent fill:#ef4444,stroke:#dc2626,stroke-width:2px,color:#ffffff
    classDef output fill:#059669,stroke:#047857,stroke-width:2px,color:#ffffff