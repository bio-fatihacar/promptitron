<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promptitron Unified - Mermaid AkÄ±ÅŸ DiyagramlarÄ±</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
            padding: 40px 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .header h1 {
            font-size: 3em;
            margin: 0;
            font-weight: 700;
            background: linear-gradient(45deg, #fff, #f8f9ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .header p {
            font-size: 1.2em;
            margin: 10px 0 0 0;
            opacity: 0.9;
        }
        
        .diagram-section {
            background: white;
            margin: 30px 0;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .diagram-section:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.15);
        }
        
        .diagram-header {
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            color: white;
            padding: 25px 30px;
            font-size: 1.5em;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .diagram-header .icon {
            font-size: 2em;
        }
        
        .diagram-content {
            padding: 30px;
            background: #fafafa;
        }
        
        .mermaid {
            text-align: center;
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            margin: 20px 0;
        }
        
        .description {
            background: #f8fafc;
            border-left: 5px solid #4f46e5;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
            font-size: 1.1em;
            line-height: 1.6;
            color: #374151;
        }
        
        .description h3 {
            margin: 0 0 15px 0;
            color: #1f2937;
            font-size: 1.3em;
        }
        
        .description ul {
            margin: 10px 0 0 0;
            padding-left: 20px;
        }
        
        .description li {
            margin: 8px 0;
        }
        
        .navigation {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            z-index: 1000;
        }
        
        .navigation h3 {
            margin: 0 0 15px 0;
            color: #1f2937;
            font-size: 1.1em;
        }
        
        .navigation a {
            display: block;
            color: #4f46e5;
            text-decoration: none;
            padding: 8px 12px;
            border-radius: 8px;
            margin: 5px 0;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .navigation a:hover {
            background: #4f46e5;
            color: white;
            transform: translateX(5px);
        }
        
        .footer {
            text-align: center;
            color: white;
            padding: 40px 20px;
            margin-top: 60px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }
        
        .footer p {
            margin: 5px 0;
            opacity: 0.8;
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            
            .navigation {
                position: relative;
                top: 0;
                right: 0;
                margin: 20px 0;
            }
            
            .diagram-header {
                font-size: 1.2em;
                padding: 20px;
            }
            
            .diagram-content {
                padding: 20px;
            }
        }
        
        /* Mermaid styling overrides */
        .mermaid svg {
            max-width: 100%;
            height: auto;
        }
        
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>ğŸš€ Promptitron Unified</h1>
            <p>AI EÄŸitim Sistemi - Mermaid AkÄ±ÅŸ DiyagramlarÄ±</p>
        </div>
        
        <!-- Navigation -->
        <div class="navigation">
            <h3>ğŸ“ Diyagram Listesi</h3>
            <a href="#system-architecture">ğŸ—ï¸ Sistem Mimarisi</a>
            <a href="#data-flow">ğŸ”„ Veri AkÄ±ÅŸÄ±</a>
            <a href="#input-output">ğŸ“Š Girdi-Ã‡Ä±ktÄ± SÃ¼reÃ§leri</a>
        </div>
        
        <!-- System Architecture Diagram -->
        <div class="diagram-section" id="system-architecture">
            <div class="diagram-header">
                <span class="icon">ğŸ—ï¸</span>
                <span>Sistem Mimarisi</span>
            </div>
            <div class="diagram-content">
                <div class="description">
                    <h3>Sistem Mimarisi DiyagramÄ±</h3>
                    <p>Bu diyagram Promptitron Unified sisteminin genel mimarisini gÃ¶sterir. Sistem ÅŸu ana katmanlardan oluÅŸur:</p>
                    <ul>
                        <li><strong>Frontend KatmanÄ±:</strong> Next.js tabanlÄ± web arayÃ¼zÃ¼ ve React bileÅŸenleri</li>
                        <li><strong>API Gateway:</strong> FastAPI tabanlÄ± RESTful API servisleri</li>
                        <li><strong>Core AI Sistemi:</strong> Gemini entegrasyonu, uzman ajanlar ve hafÄ±za yÃ¶netimi</li>
                        <li><strong>RAG Sistemi:</strong> ChromaDB vektÃ¶r arama ve hibrit arama motoru</li>
                        <li><strong>Veri KatmanÄ±:</strong> JSON mÃ¼fredat verileri, SQLite ve dosya yÃ¶netimi</li>
                        <li><strong>Harici Servisler:</strong> Google API, YouTube ve web servisleri</li>
                    </ul>
                </div>

                <div class="mermaid" id="diagram-1">
                    flowchart TB
    User[ğŸ‘¤ Student] --> UI[ğŸ–¥ï¸ Web UI]
    
    subgraph Frontend["ğŸ“± Frontend Layer"]
        UI --> Pages[ğŸ“„ Pages]
        Pages --> Components[ğŸ§© Components]
        Components --> Hooks[ğŸ”— API Hooks]
    end
    
    Hooks --> API[ğŸŒ FastAPI]
    
    subgraph APILayer["ğŸ”§ API Layer"]
        API --> Routers[ğŸ“ Routers]
        Routers --> Controllers[âš™ï¸ Controllers]
    end
    
    Controllers --> AICore[ğŸ¤– AI Core]
    
    subgraph AISystem["ğŸ§  AI System"]
        AICore --> Gemini[âœ¨ Gemini 2.5]
        AICore --> Agents[ğŸ‘¨â€ğŸ« Experts]
        AICore --> Memory[ğŸ’­ Memory]
    end
    
    AICore --> RAG[ğŸ” RAG Engine]
    
    subgraph RAGSystem["ğŸ” RAG System"]
        RAG --> ChromaDB[(ğŸ“Š ChromaDB)]
        RAG --> Search[ğŸ” Search]
        RAG --> Embeddings[ğŸ”¢ Embeddings]
    end
    
    subgraph DataLayer["ğŸ’¾ Data Layer"]
        JSON[(ğŸ“š JSON Files)]
        SQLite[(ğŸ—„ï¸ SQLite DB)]
        Uploads[(ğŸ“ File Storage)]
    end
    
    subgraph External["ğŸŒ External APIs"]
        GoogleAPI[ğŸ”® Google API]
        YouTubeAPI[ğŸ¥ YouTube API]
    end
    
    ChromaDB --> JSON
    Memory --> SQLite
    Controllers --> Uploads
    Gemini --> GoogleAPI
    AICore --> YouTubeAPI
    
    classDef frontend fill:#3b82f6,stroke:#1e40af,stroke-width:2px,color:#ffffff
    classDef api fill:#10b981,stroke:#059669,stroke-width:2px,color:#ffffff
    classDef ai fill:#8b5cf6,stroke:#7c3aed,stroke-width:2px,color:#ffffff
    classDef rag fill:#f59e0b,stroke:#d97706,stroke-width:2px,color:#ffffff
    classDef data fill:#6b7280,stroke:#4b5563,stroke-width:2px,color:#ffffff
    classDef external fill:#ef4444,stroke:#dc2626,stroke-width:2px,color:#ffffff
                </div>
            </div>
        </div>
        
        <!-- Data Flow Diagram -->
        <div class="diagram-section" id="data-flow">
            <div class="diagram-header">
                <span class="icon">ğŸ”„</span>
                <span>Veri AkÄ±ÅŸÄ±</span>
            </div>
            <div class="diagram-content">
                <div class="description">
                    <h3>Veri AkÄ±ÅŸ DiyagramÄ±</h3>
                    <p>Bu diyagram kullanÄ±cÄ± isteÄŸinden sistem yanÄ±tÄ±na kadar olan tÃ¼m veri akÄ±ÅŸÄ±nÄ± detaylarÄ±yla gÃ¶sterir:</p>
                    <ul>
                        <li><strong>Girdi TÃ¼rleri:</strong> Chat mesajlarÄ±, soru Ã¼retimi, dosya yÃ¼kleme, YouTube analizi</li>
                        <li><strong>Validasyon:</strong> Girdi kontrolÃ¼, format doÄŸrulama ve gÃ¼venlik kontrolleri</li>
                        <li><strong>AI Ä°ÅŸleme:</strong> Context oluÅŸturma, ajan seÃ§imi ve LLM iÅŸleme</li>
                        <li><strong>RAG Entegrasyonu:</strong> VektÃ¶r arama, semantik eÅŸleÅŸtirme ve context geniÅŸletme</li>
                        <li><strong>HafÄ±za YÃ¶netimi:</strong> Session gÃ¼ncelleme ve uzun dÃ¶nem hafÄ±za</li>
                        <li><strong>Hata YÃ¶netimi:</strong> KapsamlÄ± hata kontrolÃ¼ ve kullanÄ±cÄ± bilgilendirme</li>
                    </ul>
                </div>

                <div class="mermaid" id="diagram-2">
                    flowchart TD
    User[ğŸ‘¤ KullanÄ±cÄ±] --> InputType{ğŸ¯ Girdi Tipi}
    
    InputType -->|Chat| ChatFlow[ğŸ’¬ Chat]
    InputType -->|Questions| QuestionFlow[â“ Sorular]
    InputType -->|File| FileFlow[ğŸ“„ Dosya]
    InputType -->|YouTube| YouTubeFlow[ğŸ¥ YouTube]
    InputType -->|Curriculum| CurriculumFlow[ğŸ“š MÃ¼fredat]
    
    ChatFlow --> Validate1[âœ… Validasyon]
    QuestionFlow --> Validate2[âœ… Validasyon]
    FileFlow --> Validate3[âœ… Validasyon]
    YouTubeFlow --> Validate4[âœ… Validasyon]
    CurriculumFlow --> Validate5[âœ… Validasyon]
    
    Validate1 --> Process1[âš™ï¸ Ä°ÅŸleme]
    Validate2 --> Process2[âš™ï¸ Ä°ÅŸleme]
    Validate3 --> Process3[âš™ï¸ Ä°ÅŸleme]
    Validate4 --> Process4[âš™ï¸ Ä°ÅŸleme]
    Validate5 --> Process5[âš™ï¸ Ä°ÅŸleme]
    
    Process1 --> Context[ğŸ”§ Context Builder]
    Process2 --> Context
    Process3 --> Context
    Process4 --> Context
    Process5 --> Context
    
    Context --> RAGCheck{ğŸ” RAG Gerekli?}
    
    RAGCheck -->|Evet| RAGSystem[ğŸ” RAG Sistemi]
    RAGCheck -->|HayÄ±r| AgentRouter[ğŸ¤– Agent Router]
    
    RAGSystem --> VectorSearch[ğŸ”¢ Vector Arama]
    VectorSearch --> ChromaDB[(ğŸ“Š ChromaDB)]
    ChromaDB --> ContextAugment[â• Context GeniÅŸletme]
    
    ContextAugment --> AgentRouter
    AgentRouter --> ExpertSelect{ğŸ‘¨â€ğŸ« Uzman SeÃ§imi}
    
    ExpertSelect -->|Math| MathExpert[ğŸ“ Matematik]
    ExpertSelect -->|Physics| PhysicsExpert[âš›ï¸ Fizik]  
    ExpertSelect -->|Chemistry| ChemExpert[ğŸ§ª Kimya]
    ExpertSelect -->|Biology| BioExpert[ğŸ§¬ Biyoloji]
    ExpertSelect -->|General| GeneralExpert[ğŸ“ Genel]
    
    MathExpert --> LLMProcess[ğŸ¤– LLM Ä°ÅŸleme]
    PhysicsExpert --> LLMProcess
    ChemExpert --> LLMProcess
    BioExpert --> LLMProcess
    GeneralExpert --> LLMProcess
    
    LLMProcess --> GeminiAPI[âœ¨ Gemini API]
    GeminiAPI --> ResponseGen[ğŸ“ YanÄ±t Ãœretimi]
    
    ResponseGen --> ResponseVal[âœ… YanÄ±t Validasyon]
    ResponseVal --> MemoryUpdate[ğŸ’­ HafÄ±za GÃ¼ncelleme]
    
    MemoryUpdate --> FinalOutput[ğŸ“¤ Ã‡Ä±ktÄ±]
    FinalOutput --> User
    
    %% Error Handling
    Validate1 -->|Hata| ErrorHandler[âŒ Hata]
    Validate2 -->|Hata| ErrorHandler
    Validate3 -->|Hata| ErrorHandler
    Validate4 -->|Hata| ErrorHandler
    Validate5 -->|Hata| ErrorHandler
    GeminiAPI -->|API HatasÄ±| ErrorHandler
    
    ErrorHandler --> ErrorResponse[âš ï¸ Hata YanÄ±tÄ±]
    ErrorResponse --> User
    
    classDef input fill:#3b82f6,stroke:#1e40af,stroke-width:2px,color:#ffffff
    classDef validation fill:#10b981,stroke:#059669,stroke-width:2px,color:#ffffff
    classDef processing fill:#8b5cf6,stroke:#7c3aed,stroke-width:2px,color:#ffffff
    classDef rag fill:#f59e0b,stroke:#d97706,stroke-width:2px,color:#ffffff
    classDef agent fill:#ef4444,stroke:#dc2626,stroke-width:2px,color:#ffffff
    classDef output fill:#059669,stroke:#047857,stroke-width:2px,color:#ffffff
                </div>
            </div>
        </div>
        
        <!-- Input/Output Processes Diagram -->
        <div class="diagram-section" id="input-output">
            <div class="diagram-header">
                <span class="icon">ğŸ“Š</span>
                <span>Girdi-Ã‡Ä±ktÄ± SÃ¼reÃ§leri</span>
            </div>
            <div class="diagram-content">
                <div class="description">
                    <h3>Girdi-Ã‡Ä±ktÄ± SÃ¼reÃ§leri DiyagramÄ±</h3>
                    <p>Bu diyagram sistemin tÃ¼m girdi tÃ¼rlerini ve bunlarÄ±n nasÄ±l iÅŸlenip Ã§Ä±ktÄ±ya dÃ¶nÃ¼ÅŸtÃ¼ÄŸÃ¼nÃ¼ detaylandÄ±rÄ±r:</p>
                    <ul>
                        <li><strong>Girdi Kategorileri:</strong> Chat, mÃ¼fredat seÃ§imi, soru parametreleri, iÃ§erik analizi, YouTube</li>
                        <li><strong>Ä°ÅŸleme KatmanÄ±:</strong> Validasyon, Ã¶n iÅŸleme, AI iÅŸleme, veri iÅŸleme</li>
                        <li><strong>Ã‡Ä±ktÄ± TÃ¼rleri:</strong> Chat yanÄ±tlarÄ±, sorular, analizler, mÃ¼fredat iÃ§eriÄŸi</li>
                        <li><strong>Metadata:</strong> YanÄ±t metadata, log verisi ve performans metrikleri</li>
                        <li><strong>Hata YÃ¶netimi:</strong> Hata yanÄ±tlarÄ± ve kurtarma seÃ§enekleri</li>
                    </ul>
                </div>

                <div class="mermaid" id="diagram-3">
                    
                    flowchart LR
    subgraph Inputs["ğŸ“¥ GÄ°RDÄ°LER"]
        Chat[ğŸ’¬ Chat MesajÄ±]
        Questions[â“ Soru Parametreleri]
        Files[ğŸ“„ Dosya YÃ¼kleme]
        YouTube[ğŸ¥ YouTube URL]
        Curriculum[ğŸ“š MÃ¼fredat SeÃ§imi]
    end
    
    subgraph Processing["âš™ï¸ Ä°ÅLEME"]
        Validate[âœ… Validasyon]
        Context[ğŸ”§ Context OluÅŸturma]
        RAG[ğŸ” RAG Arama]
        Agent[ğŸ¤– Agent SeÃ§imi]
        LLM[âœ¨ LLM Ä°ÅŸleme]
    end
    
    subgraph Outputs["ğŸ“¤ Ã‡IKTILAR"]
        ChatResp[ğŸ’¬ Chat YanÄ±tÄ±]
        QuestList[â“ Soru Listesi]
        Analysis[ğŸ“Š Ä°Ã§erik Analizi]
        VideoSum[ğŸ¥ Video Ã–zeti]
        CurriculumOut[ğŸ“š MÃ¼fredat Ä°Ã§eriÄŸi]
    end
    
    Chat --> Validate
    Questions --> Validate
    Files --> Validate
    YouTube --> Validate
    Curriculum --> Validate
    
    Validate --> Context
    Context --> RAG
    RAG --> Agent
    Agent --> LLM
    
    LLM --> ChatResp
    LLM --> QuestList
    LLM --> Analysis
    LLM --> VideoSum
    LLM --> CurriculumOut
    
    classDef input fill:#3b82f6,stroke:#1e40af,stroke-width:2px,color:#ffffff
    classDef processing fill:#8b5cf6,stroke:#7c3aed,stroke-width:2px,color:#ffffff
    classDef output fill:#10b981,stroke:#059669,stroke-width:2px,color:#ffffff
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <div class="footer">
            <p><strong>Promptitron Unified AI Education System</strong></p>
            <p>ğŸ¤– Powered by Google Gemini 2.5 | ğŸ” ChromaDB Vector Search | âš¡ Next.js & FastAPI</p>
            <p>ğŸ“Š Diyagramlar Mermaid.js ile oluÅŸturulmuÅŸtur</p>
        </div>
    </div>

    <script>
        // Mermaid configuration
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis',
                padding: 20
            },
            themeVariables: {
                primaryColor: '#4f46e5',
                primaryTextColor: '#ffffff',
                primaryBorderColor: '#3730a3',
                lineColor: '#6b7280',
                secondaryColor: '#f8fafc',
                tertiaryColor: '#f1f5f9'
            }
        });

        // Function to load and render mermaid diagram
        async function loadDiagram(fileName, elementId, loadingId) {
            try {
                const response = await fetch(fileName);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const diagramText = await response.text();
                
                // Hide loading spinner
                document.getElementById(loadingId).style.display = 'none';
                
                // Render mermaid diagram
                const element = document.getElementById(elementId);
                element.textContent = diagramText;
                mermaid.init(undefined, element);
                
            } catch (error) {
                console.error(`Error loading ${fileName}:`, error);
                document.getElementById(loadingId).innerHTML = 
                    '<div style="color: #ef4444; padding: 20px; text-align: center;">' +
                    '<strong>âš ï¸ Diyagram yÃ¼klenemedi</strong><br>' +
                    '<small>Dosya: ' + fileName + '</small><br>' +
                    '<small>Hata: ' + error.message + '</small>' +
                    '</div>';
            }
        }


        // Smooth scrolling for navigation links
        document.querySelectorAll('.navigation a').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Add intersection observer for navigation highlighting
        const observerOptions = {
            root: null,
            rootMargin: '-20% 0px -70% 0px',
            threshold: 0
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                const navLink = document.querySelector(`.navigation a[href="#${entry.target.id}"]`);
                if (navLink) {
                    if (entry.isIntersecting) {
                        // Remove active class from all links
                        document.querySelectorAll('.navigation a').forEach(link => {
                            link.style.background = '';
                            link.style.color = '#4f46e5';
                        });
                        // Add active class to current link
                        navLink.style.background = '#4f46e5';
                        navLink.style.color = 'white';
                    }
                }
            });
        }, observerOptions);

        // Observe all diagram sections
        document.querySelectorAll('.diagram-section').forEach(section => {
            observer.observe(section);
        });
    </script>
</body>
</html>